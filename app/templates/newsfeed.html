{% extends "navbar.html" %}
{% block navbar %}

<br>
<div class="row">

	<!-- GREETING -->
	<div class="col-xs-10 col-sm-10 col-lg-10">
    <h2>Welcome {{ currentUser.name }}</h2>
	</div>
	
	<div class="col-xs-offset-1 col-md-offset-2 col-xs-10 col-md-8">
		<button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#collapsePost">
    		+ New Post
  		</button>
  		<br>

  		<div class="collapse" id="collapsePost">
        <br>
        <form method="POST">
				  {{ postForm.hidden_tag() }}
				  {{ postForm.text(placeholder = "Post something...", class="form-control inputlg") }}
				  <br>
          <!-- Shows the errors in red -->
          {% for error in postForm.text.errors %}
            <span class="errors">{{ error }}</span>
          {% endfor %}
				  <div class="pull-right">
					 <input type="submit" class="btn btn-success" value="Post">
				  </div>
    		</form>
	    </div>
    </div>

	{% for i in range(posts|length-1, 0, -1) %}
	{% set post = posts[i] %}
	<div class="post col-xs-offset-1 col-md-offset-2 col-xs-10 col-md-8">
    <div class="row">
      <img class="post_profile_picture" alt="Profile Picture" id="image_{{ post.id }}"
        src="{{ url_for('static', filename='images/profile_pictures/' + post.author.username + '.jpg') }}">
      <!-- Prevent Caching -->
      <script type="text/javascript">noCache("image_{{ post.id }}")</script>

    	<a href="/profile/{{post.author.username}}">
    		{{post.author.name}} {{post.author.surname}}
		  </a>
    
    	<div class="datetime pull-right">
    		<!-- Compute the time and format it in a nicer way -->
    		{% set time = timeNow - post.date %}
  		  {% set time = time|string %}
    		Posted {{time[0:-7]}} ago
    	</div>
    </div>
    <p>{{ post.text }}</p>

    <div class="footer-post row">
      <p class="pull-left">Hates</p>
      <p class="pull-right">Comments</p>
    </div>
  </div>
  {% endfor %}


</div>



{% endblock %}
