{% extends "navbar.html" %}
{% block navbar %}

<br>
<div class="row">

	<!-- GREETING -->
	<div class="col-xs-8 col-sm-10 col-lg-10">
		<h2>NewsFeed</h2>
	</div>
	
	<div class="col-xs-offset-1 col-md-offset-2 col-xs-10 col-md-8">
		<button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#collapsePost">
    		New Post
  		</button>
  		<br><br>

  		<div class="collapse" id="collapsePost">
			<form method="POST">
				{{ postForm.hidden_tag() }}
				{{ postForm.text(placeholder = "Post something...", class="form-control inputlg") }}
				<br>
				<div class="pull-right">
					<input type="submit" class="btn btn-success" value="Post">
				</div>
    		</form>
	    </div>
    </div>

	{% for i in range(posts|length-1, 0, -1) %}
	{% set post = posts[i] %}
	<div class="post col-xs-offset-1 col-md-offset-2 col-xs-10 col-md-8">
      <div class="row">
      	<img id="post_profile_picture" class="no-cache-image" alt="Profile Picture" src="{{ url_for('static', filename=avatar_filename) }}">
      	<a href="/profilepage/{{post.author.username}}">
      		{{post.author.name}} {{post.author.surname}}
  		</a>
      
      	<div class="datetime pull-right">
      		<!-- Compute the time and format it in a nicer way -->
      		{% set time = timeNow - post.date %}
    		{% set time = time|string %}
      		Posted {{time[0:-7]}} ago
      	</div>
      </div>
      <p>{{ post.text }}</p>
    </div>
    {% endfor %}


</div>



{% endblock %}
